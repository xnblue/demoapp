System.register("chunks:///_virtual/audio-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,o,e,r,a,n,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.initializerDefineProperty},function(i){e=i.cclegacy,r=i.AudioClip,a=i._decorator,n=i.Component,u=i.AudioSource}],execute:function(){var l,c,p,s,d,h,g;e._RF.push({},"52ff6Qg0MlJaaUpLNS1HPTJ","audio-manager",void 0);const{ccclass:m,property:f}=a;i("AudioManager",(l=m("AudioManager"),c=f(r),p=f(r),l((h=t((d=class extends n{constructor(...i){super(...i),o(this,"bg",h,this),o(this,"click",g,this),this.audioComp=null}start(){this.audioComp=this.getComponent(u)}playSound(i=!0){i?(this.audioComp.clip=this.bg,this.audioComp.play()):this.audioComp.stop()}playClip(){this.audioComp.playOneShot(this.click)}}).prototype,"bg",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(d.prototype,"click",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=d))||s));e._RF.pop()}}}));

System.register("chunks:///_virtual/ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./utils.ts","./pool-manager.ts"],(function(t){var i,s,e,o,r,a,n,h,u,c,P,d,_,m,A,p,S;return{setters:[function(t){i=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){e=t.cclegacy,o=t.Vec3,r=t.Prefab,a=t._decorator,n=t.Component,h=t.Node,u=t.ParticleUtils,c=t.find,P=t.Camera,d=t.Label,_=t.Animation,m=t.ParticleSystem},function(t){A=t.Constants},function(t){p=t.utils},function(t){S=t.PoolManager}],execute:function(){var l,T,E,B,R,L,M,g,O;e._RF.push({},"900c8pQ81tCcrbRdvi9SxTB","ball",void 0);const{ccclass:f,property:N}=a,D=new o;t("Ball",(l=f("Ball"),T=N(r),E=N({type:r}),B=N({type:r}),l((M=i((L=class extends n{constructor(...t){super(...t),s(this,"diamondParticlePrefab",M,this),s(this,"scoreAniPrefab",g,this),s(this,"trail02Prefab",O,this),this.currBoard=null,this.boardCount=0,this.jumpState=A.BALL_JUMP_STATE.JUMPUP,this.currBoardIdx=0,this.diffLevel=1,this.currJumpFrame=0,this.hasSprint=!1,this.isTouch=!1,this.touchPosX=0,this.movePosX=0,this.isJumpSpring=!1,this.boardGroupCount=0,this.trailNode=null,this.timeScale=0,this._wPos=new o}start(){A.game.node.on(h.EventType.TOUCH_START,this.onTouchStart,this),A.game.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),A.game.node.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),A.game.node.on(A.GAME_EVENT.RESTART,this.gameStart,this),this.updateBall(),this.reset()}onDestroy(){A.game.node.off(h.EventType.TOUCH_START,this.onTouchStart,this),A.game.node.off(h.EventType.TOUCH_END,this.onTouchEnd,this),A.game.node.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),A.game.node.off(A.GAME_EVENT.RESTART,this.gameStart,this)}update(t){if(this.timeScale=Math.floor(t/A.normalDt*100)/100,A.game.state===A.GAME_STATE.PLAYING){const t=A.game.boardManager,i=t.getBoardList();if(this.jumpState===A.BALL_JUMP_STATE.SPRINT){this.currJumpFrame>A.BALL_JUMP_FRAMES_SPRINT&&(this.jumpState=A.BALL_JUMP_STATE.JUMPUP,this.isJumpSpring=!1,this.currJumpFrame=0,this.hasSprint=!1,t.clearDiamond()),this.currJumpFrame+=this.timeScale;const i=t.getDiamondSprintList();for(let t=0;t<A.DIAMOND_NUM;t++)Math.abs(this.node.position.y-i[t].position.y)<=A.DIAMOND_SPRINT_SCORE_AREA&&Math.abs(this.node.position.x-i[t].position.x)<=A.DIAMOND_SPRINT_SCORE_AREA&&(A.game.addScore(A.DIAMOND_SCORE),this.showScore(A.DIAMOND_SCORE),A.game.ball.playDiamondParticle(this.node.position),i[t].active=!1);this.setPosY(),this.setPosX(),this.touchPosX=this.movePosX;const s=this.node.position.y+A.CAMERA_OFFSET_Y_SPRINT;A.game.cameraCtrl.setOriginPosY(s)}else{for(let t=this.currBoardIdx+1;t>=0;t--){const s=i[t],e=this.node.position,o=i[t].node.position;if(Math.abs(e.x-o.x)<=i[t].getRadius()&&Math.abs(e.y-(o.y+A.BOARD_HEIGTH))<=A.DIAMOND_SCORE_AREA&&i[t].checkDiamond(e.x),this.jumpState===A.BALL_JUMP_STATE.FALLDOWN){if(this.currJumpFrame>A.PLAYER_MAX_DOWN_FRAMES||this.currBoard.node.position.y-e.y-(A.BOARD_GAP+A.BOARD_HEIGTH)>.001)return u.stop(this.trailNode),void A.game.gameDie();if(this.isOnBoard(s)){this.currBoard=s,this.currBoardIdx=t,this.activeCurrBoard();break}}}this.currJumpFrame+=this.timeScale,this.jumpState===A.BALL_JUMP_STATE.JUMPUP&&(this.isJumpSpring&&this.currJumpFrame>=A.BALL_JUMP_FRAMES_SPRING||!this.isJumpSpring&&this.currJumpFrame>=A.BALL_JUMP_FRAMES)&&(this.jumpState=A.BALL_JUMP_STATE.FALLDOWN,this.currJumpFrame=0),this.setPosY(),this.setPosX(),this.currBoard.type!==A.BOARD_TYPE.SPRINT&&A.game.cameraCtrl.setOriginPosX(this.node.position.x),this.touchPosX=this.movePosX}this.setTrailPos()}}onTouchStart(t,i){this.isTouch=!0,this.touchPosX=t.getLocation().x,this.movePosX=this.touchPosX}onTouchMove(t,i){this.movePosX=t.getLocation().x}onTouchEnd(t,i){this.isTouch=!1}gameStart(){this.playTrail()}reset(){this.boardCount=0,this.diffLevel=1,D.set(A.BOARD_INIT_POS),D.y+=A.BALL_RADIUS+A.BOARD_HEIGTH/2-.001,this.node.setPosition(D),this.node.eulerAngles=new o,this.currJumpFrame=0,this.jumpState=A.BALL_JUMP_STATE.FALLDOWN,this.hasSprint=!1,this.currBoardIdx=0,this.show(),this.setTrailPos()}updateBall(){this.trailNode=S.instance.getNode(this.trail02Prefab,this.node.parent)}show(){this.node.active=!0}hide(){this.node.active=!1}activeCurrBoard(){const t=this.node.position,i=this.currBoard.node.position,s=this.currBoard.type,e=i.y+A.BALL_RADIUS+this.currBoard.getHeight()/2-.01;if(this.node.setPosition(t.x,e,t.z),this.currJumpFrame=0,s===A.BOARD_TYPE.SPRINT?(this.jumpState=A.BALL_JUMP_STATE.SPRINT,A.game.cameraCtrl.setOriginPosX(i.x)):this.jumpState=A.BALL_JUMP_STATE.JUMPUP,!this.currBoard.isActive){this.currBoard.isActive=!0;let e=A.SCORE_BOARD_NOT_CENTER;(s!==A.BOARD_TYPE.NORMAL&&s!==A.BOARD_TYPE.DROP||Math.abs(t.x-i.x)<=A.BOARD_RADIUS_CENTER)&&(e=A.SCORE_BOARD_CENTER),A.game.addScore(e),this.showScore(e),this.boardCount++,5===this.boardCount&&A.game.node.emit(A.GAME_EVENT.HIDETIPS),this.diffLevel+=e/2;for(let t=this.currBoardIdx-A.BOARD_NEW_INDEX;t>0;t--)this.newBoard()}this.isJumpSpring=s===A.BOARD_TYPE.SPRING,this.currBoard.setBump(),this.currBoard.setWave(),s!=A.BOARD_TYPE.SPRING&&s!=A.BOARD_TYPE.SPRINT||this.currBoard.setSpring();const o=A.game.boardManager.getBoardList();if(s===A.BOARD_TYPE.DROP)for(let t=0;t<this.currBoardIdx;t++)o[t].setDrop();const r=i.y+A.CAMERA_OFFSET_Y;A.game.cameraCtrl.setOriginPosY(r),A.game.cameraCtrl.preType=s}newBoard(){let t=A.BOARD_TYPE.NORMAL;if(this.boardGroupCount<=0){const i=p.getDiffCoeff(this.diffLevel,1,10),s=Math.random()*i;s<4.2?(t=A.BOARD_TYPE.NORMAL,this.boardGroupCount=2):s<=5.5?(t=A.BOARD_TYPE.GIANT,this.boardGroupCount=3):s<=6.2?(t=A.BOARD_TYPE.SPRING,Math.random()>.5&&(this.boardGroupCount=2)):s<=7?(t=A.BOARD_TYPE.DROP,this.boardGroupCount=3):s<=7.5&&!1===this.hasSprint?(t=A.BOARD_TYPE.SPRINT,this.hasSprint=!0):t=A.BOARD_TYPE.NORMAL}this.boardGroupCount--,A.game.boardManager.newBoard(t,this.diffLevel)}showScore(t){const i=S.instance.getNode(this.scoreAniPrefab,c("Canvas/resultUI")),s=new o,e=A.game.cameraCtrl.node.getComponent(P);this._wPos.set(this.node.worldPosition),e.convertToUINode(this._wPos,c("Canvas/resultUI"),s),s.x+=50,i.setPosition(s),i.getComponentInChildren(d).string=`+${t}`;const r=i.getComponent(_);r.once(_.EventType.FINISHED,(()=>{S.instance.putNode(i)})),r.play()}setPosX(){if(this.isTouch&&this.touchPosX!==this.movePosX)if(D.set(this.node.position),this.jumpState===A.BALL_JUMP_STATE.SPRINT){let t=(this.movePosX-this.touchPosX)*A.COEFF_POS_BALL;this.node.setPosition(D.x+t,D.y,D.z),D.set(this.node.position),t=D.x;let i=1.3*A.SCENE_MAX_OFFSET_X;const s=this.currBoard.node.position;t>s.x+i?this.node.setPosition(s.x+i,D.y,D.z):t<this.currBoard.node.position.x-i&&this.node.setPosition(s.x-i,D.y,D.z)}else{const t=(this.movePosX-this.touchPosX)*A.COEFF_POS_BALL;this.node.setPosition(D.x+t,D.y,D.z)}}setPosY(){if(D.set(this.node.position),this.jumpState===A.BALL_JUMP_STATE.JUMPUP)this.isJumpSpring?D.y+=A.BALL_JUMP_STEP_SPRING[Math.floor(this.currJumpFrame/3)]*this.timeScale:D.y+=A.BALL_JUMP_STEP[Math.floor(this.currJumpFrame/2)]*this.timeScale,this.node.setPosition(D);else if(this.jumpState===A.BALL_JUMP_STATE.FALLDOWN){if(this.currBoard.type===A.BOARD_TYPE.SPRING)if(this.currJumpFrame<A.BALL_JUMP_FRAMES_SPRING){const t=A.BALL_JUMP_FRAMES_SPRING-this.currJumpFrame-1;D.y-=A.BALL_JUMP_STEP_SPRING[Math.floor((t>=0?t:0)/3)]*this.timeScale}else D.y-=A.BALL_JUMP_STEP_SPRING[0]*this.timeScale;else if(this.currJumpFrame<A.BALL_JUMP_FRAMES){const t=A.BALL_JUMP_FRAMES-this.currJumpFrame-1;D.y-=A.BALL_JUMP_STEP[Math.floor((t>=0?t:0)/2)]*this.timeScale}else D.y-=A.BALL_JUMP_STEP[0]*this.timeScale;this.node.setPosition(D)}else this.jumpState===A.BALL_JUMP_STATE.SPRINT&&(D.y+=A.BALL_JUMP_STEP_SPRINT*this.timeScale,this.node.setPosition(D),this.currJumpFrame>=A.DIAMOND_START_FRAME+20&&this.currJumpFrame<=A.BALL_JUMP_FRAMES_SPRINT-50&&Math.floor(this.currJumpFrame)%Math.floor(A.DIAMOND_SPRINT_STEP_Y/A.BALL_JUMP_STEP_SPRINT)==0&&A.game.boardManager.newDiamond())}isOnBoard(t){const i=this.node.position,s=t.node.position,e=Math.abs(i.x-s.x),o=i.y-s.y;if(e<=t.getRadius()){if(o>=0&&o<=A.BALL_RADIUS+t.getHeight()/2)return!0;if(this.isJumpSpring&&this.currJumpFrame>=A.BALL_JUMP_FRAMES_SPRING){if(Math.abs(o)<A.BALL_JUMP_STEP_SPRING[0])return!0}else if(!this.isJumpSpring&&this.currJumpFrame>=A.BALL_JUMP_FRAMES&&Math.abs(o)<A.BALL_JUMP_STEP[0])return!0}return!1}revive(){this.currBoardIdx--,this.currBoard.type===A.BOARD_TYPE.SPRINT&&(this.currBoardIdx++,this.currBoard=A.game.boardManager.getBoardList()[this.currBoardIdx]),this.currBoard.revive();const t=this.currBoard.node.position.clone();t.y+=A.BALL_RADIUS+this.currBoard.getHeight()/2-.001,this.node.setPosition(t),this.node.eulerAngles=new o(0,0,0),this.currJumpFrame=0,this.show();const i=this.currBoard.node.position.y+A.CAMERA_OFFSET_Y;A.game.cameraCtrl.setOriginPosX(t.x),A.game.cameraCtrl.setOriginPosY(i),this.playTrail(),this.setTrailPos()}playDiamondParticle(t){const i=S.instance.getNode(this.diamondParticlePrefab,this.node.parent);i.setPosition(t);const s=i.getComponent(m);s.play();const e=()=>{s.isPlaying||(S.instance.putNode(i),this.unschedule(e))};this.schedule(e,.1)}playTrail(){u.play(this.trailNode)}setTrailPos(){const t=this.node.position;this.trailNode.setPosition(t.x,t.y-.1,t.z)}}).prototype,"diamondParticlePrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(L.prototype,"scoreAniPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(L.prototype,"trail02Prefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=L))||R));e._RF.pop()}}}));

System.register("chunks:///_virtual/board-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./utils.ts"],(function(t){var i,s,n,o,e,r,a,d,h,_;return{setters:[function(t){i=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Vec3,e=t.Prefab,r=t._decorator,a=t.Component,d=t.instantiate},function(t){h=t.Constants},function(t){_=t.utils}],execute:function(){var c,m,p,l,D,S,b;n._RF.push({},"2a0a0QivvtEZodpOZ79qMFb","board-manager",void 0);const{ccclass:N,property:P}=r,u=new o,f=new o;t("BoardManager",(c=N("BoardManager"),m=P(e),p=P(e),c((S=i((D=class extends a{constructor(...t){super(...t),s(this,"boardPrefab",S,this),s(this,"diamondPrefab",b,this),this.diamondSprintList=[],this.diamondCenterX=0,this._boardList=[],this._boardInsIdx=0}start(){this.initBoard(),this.initDiamond()}reset(){this._boardInsIdx=0,h.game.initFirstBoard=!1;let t,i=h.BOARD_INIT_POS.clone();const s=h.BOARD_TYPE.NORMAL;for(let n=0;n<h.BOARD_NUM;n++)t=this._boardList[n],t.reset(s,i,1),i=this.getNextPos(t,1);if(t=this._boardList[0],t.isActive=!0,h.game.ball.currBoard=t,this.diamondSprintList[0])for(var n=0;n<h.DIAMOND_NUM;n++)this.diamondSprintList[n].active=!1}initBoard(){for(let t=0;t<h.BOARD_NUM;t++){const t=d(this.boardPrefab);t.name=this._boardInsIdx.toString(),this._boardInsIdx++,this.node.addChild(t);const i=t.getComponent("Board");this._boardList.push(i)}this.reset()}newBoard(t,i){const s=this._boardList[h.BOARD_NUM-1],n=this.getNextPos(s,i,u),o=this._boardList.shift();t===h.BOARD_TYPE.SPRINT?(this.diamondCenterX=n.x,this.setDiamond(n),o.reset(t,n,0)):o.reset(t,n,i),o.name=this._boardInsIdx.toString(),this._boardInsIdx++,this._boardList.push(o)}getNextPos(t,i,s){const n=s?s.set(t.node.position):t.node.position.clone(),o=_.getDiffCoeff(i,1,2);return n.x=(Math.random()-.5)*h.SCENE_MAX_OFFSET_X*o,t.type===h.BOARD_TYPE.SPRINT&&(n.y+=h.BOARD_GAP_SPRINT,n.x=t.node.position.x),t.type===h.BOARD_TYPE.SPRING?n.y+=h.BOARD_GAP_SPRING:n.y+=h.BOARD_GAP,n}initDiamond(){for(let t=0;t<h.DIAMOND_NUM;t++)this.diamondSprintList[t]=d(this.diamondPrefab),this.node.addChild(this.diamondSprintList[t]),this.diamondSprintList[t].active=!1}setDiamond(t){const i=t.clone();i.y+=h.BALL_JUMP_STEP_SPRINT*h.DIAMOND_START_FRAME;for(let t=0;t<h.DIAMOND_NUM;t++)this.setNextDiamondPos(i),this.diamondSprintList[t].setPosition(i),this.diamondSprintList[t].active=!0}newDiamond(){f.set(this.diamondSprintList[h.DIAMOND_NUM-1].position),this.setNextDiamondPos(f);const t=this.diamondSprintList.shift();t.setPosition(f),t.active=!0,this.diamondSprintList.push(t)}clearDiamond(){for(let t=0;t<h.DIAMOND_NUM;t++)this.diamondSprintList[t].active=!1}setNextDiamondPos(t){t.y+=h.DIAMOND_SPRINT_STEP_Y,t.x+=1.5*(Math.random()-.5),t.x>this.diamondCenterX+h.SCENE_MAX_OFFSET_X?t.x=this.diamondCenterX+h.SCENE_MAX_OFFSET_X:t.x<this.diamondCenterX-h.SCENE_MAX_OFFSET_X&&(t.x=this.diamondCenterX-h.SCENE_MAX_OFFSET_X)}getBoardList(){return this._boardList}getDiamondSprintList(){return this.diamondSprintList}}).prototype,"boardPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(D.prototype,"diamondPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=D))||l));n._RF.pop()}}}));

System.register("chunks:///_virtual/board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./utils.ts"],(function(i){var t,e,s,n,o,r,a,h,p,c,l,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){s=i.cclegacy,n=i.Vec3,o=i.Prefab,r=i._decorator,a=i.Component,h=i.instantiate,p=i.MeshRenderer,c=i.Color},function(i){l=i.Constants},function(i){d=i.utils}],execute:function(){var R,_,g,P,D,S,A,m,v,E,O,T,u;s._RF.push({},"bb50aLcTl1FbpB7Hy0H/DT9","board",void 0);const{ccclass:f,property:B}=r,I=new n;i("Board",(R=f("Board"),_=B(o),g=B({type:o}),P=B({type:o}),D=B({type:o}),S=B({type:o}),R((v=t((m=class extends a{constructor(...i){super(...i),e(this,"diamondPrefab",v,this),e(this,"centerPrefab",E,this),e(this,"wavePrefab",O,this),e(this,"springTopPrefab",T,this),e(this,"springHelixPrefab",u,this),this.isActive=!1,this.diamondList=[],this.type=l.BOARD_TYPE.NORMAL,this.wave=null,this.waveInner=null,this.waveOriginScale=new n,this.currWaveFrame=0,this.currSpringFrame=0,this.currBumpFrame=l.BOARD_BUMP_FRAMES,this.springTop=null,this.springHelix=null,this.springHelixOriginScale=new n,this.center=null,this.isMovingRight=!0,this.hasDiamond=!1,this.isMoving=!1,this.posBeforeDrop=new n,this.originScale=new n,this.currDropFrame=l.BOARD_DROP_FRAMES,this._game=null}onLoad(){this.originScale.set(this.node.scale),this.initCenter(),this.initWave(),this.initSpring(),this.initDiamond()}update(){this.effectBump(),this.effectWave(),this.type!==l.BOARD_TYPE.SPRING&&this.type!==l.BOARD_TYPE.SPRINT||this.effectSpring(),this.effectDrop(),this.effectMove(),this.hasDiamond&&this.effectDiamondRotate()}reset(i,t,e){if(this.isActive=!1,this.type=i,this.node.setPosition(t),this.isMoving=!1,this.currDropFrame=l.BOARD_DROP_FRAMES,this.type!==l.BOARD_TYPE.NORMAL&&this.type!==l.BOARD_TYPE.DROP&&this.type!==l.BOARD_TYPE.SPRING||(this.isMoving=this.setMove(e)),this.type===l.BOARD_TYPE.GIANT?this.node.setScale(this.originScale.x*l.BOARD_SCALE_GIANT,this.originScale.y,this.originScale.z):this.type===l.BOARD_TYPE.DROP?(this.node.setScale(this.originScale.x,this.originScale.y*l.BOARD_HEIGTH_SCALE_DROP,this.originScale.z),this.posBeforeDrop.set(this.node.position)):this.node.setScale(this.originScale),this.springTop.active=!1,this.type!==l.BOARD_TYPE.SPRING&&this.type!==l.BOARD_TYPE.SPRINT||(this.springHelix.active=!0,this.springTop.active=!0,this.setSpringPos()),this.hasDiamond=!1,this.diamondList[0]){for(let i=0;i<5;i++)this.diamondList[i].active=!1;if(this.type===l.BOARD_TYPE.GIANT)for(let i=0;i<5;i++)this.diamondList[i].active=!0,this.hasDiamond=!0;else this.type!==l.BOARD_TYPE.NORMAL&&this.type!==l.BOARD_TYPE.DROP||Math.random()>.7&&(this.diamondList[2].active=l.game.initFirstBoard,l.game.initFirstBoard=!0,this.hasDiamond=!0);this.hasDiamond&&this.setDiamondPos()}}setDrop(){this.currDropFrame=0,this.posBeforeDrop.set(this.node.position)}effectDrop(){if(this.currDropFrame<l.BOARD_DROP_FRAMES){for(let i=0;i<5;i++)this.diamondList[i].active=!1;if(this.springTop.active){this.springHelix.active=!1;const i=this.springTop.position;this.springTop.setPosition(i.x,i.y-l.BOARD_DROP_STEP,i.z)}I.set(this.node.position),I.y-=l.BOARD_DROP_STEP,this.node.setPosition(I),this.setCenterPos(),this.currDropFrame++}}initDiamond(){for(let i=0;i<5;i++)this.diamondList[i]=h(this.diamondPrefab),this.node.parent.addChild(this.diamondList[i]),this.diamondList[i].active=!1}setDiamondPos(){const i=new n;for(let t=0;t<5;t++)this.diamondList[t].active&&(i.set(this.node.position),i.x+=1.4*(t-2),i.y+=l.BOARD_HEIGTH,this.diamondList[t].setPosition(i))}hideDiamond(i){this.diamondList[i].active=!1}checkDiamond(i){if(this.hasDiamond){let t=!0;for(let e=0;e<5;e++)this.diamondList[e].active&&(t=!1,Math.abs(i-this.diamondList[e].position.x)<=l.DIAMOND_SCORE_AREA&&(l.game.ball.playDiamondParticle(this.diamondList[e].position),this.hideDiamond(e),l.game.addScore(l.DIAMOND_SCORE)));t&&(this.hasDiamond=!1)}}effectDiamondRotate(){for(let i=0;i<5;i++){const t=this.diamondList[i].eulerAngles;this.diamondList[i].eulerAngles=new n(t.x,t.y+l.DIAMOND_ROTATE_STEP_Y,t.z)}}initSpring(){this.springHelix=h(this.springHelixPrefab),this.springHelixOriginScale=this.springHelix.getScale(),this.springHelix.setScale(1.5,1,1.5),this.node.parent.addChild(this.springHelix),this.springHelix.active=!1,this.currSpringFrame=2*l.BOARD_SPRING_FRAMES,this.springTop=h(this.springTopPrefab),this.node.parent.addChild(this.springTop),this.springTop.active=!1;const i=this.node.position.clone();i.y+=(l.BOARD_HEIGTH+l.SPRING_HEIGHT)/2,this.springTop.setPosition(i),this.setSpringPos()}setSpring(){this.currSpringFrame=0,this.setSpringPos(),this.springHelix.setScale(1.5,1,1.5),this.springHelix.active=!0,this.springTop.active=!0}setSpringPos(){let i=this.node.position.clone();i.y+=l.BOARD_HEIGTH/2,this.springHelix.setPosition(i),i=this.node.position.clone(),i.y+=(l.BOARD_HEIGTH+l.SPRING_HEIGHT)/2,this.springTop.setPosition(i)}effectSpring(){const i=this.type===l.BOARD_TYPE.SPRINT?l.SPRING_HELIX_STEP_SPIRNT:l.SPRING_HELIX_STEP,t=this.type===l.BOARD_TYPE.SPRINT?l.SPRING_TOP_STEP_SPRINT:l.SPRING_TOP_STEP,e=this.springHelix.scale,s=this.springTop.position;this.currSpringFrame<l.BOARD_SPRING_FRAMES?(this.springHelix.setScale(e.x,e.y+i,e.z),this.springTop.setPosition(s.x,s.y+t,s.z),this.currSpringFrame++):this.currSpringFrame>=l.BOARD_SPRING_FRAMES&&this.currSpringFrame<2*l.BOARD_SPRING_FRAMES?(this.springHelix.setScale(e.x,e.y-i,e.z),this.springTop.setPosition(s.x,s.y-t,s.z),this.currSpringFrame++):this.springHelix.active=!1}setBump(){this.currBumpFrame=0}effectBump(){if(this.currBumpFrame<l.BOARD_BUMP_FRAMES){const i=this.node.position;this.node.setPosition(i.x,i.y+l.BOARD_BUMP_STEP[this.currBumpFrame],i.z),this.setCenterPos(),this.currBumpFrame++}}initCenter(){this.center=h(this.centerPrefab),this.node.parent.addChild(this.center),this.center.active=!1}setCenterPos(){const i=this.node.position.clone();i.y+=l.BOARD_HEIGTH/2,this.center.setPosition(i)}initWave(){this.wave=h(this.wavePrefab),this.node.parent.addChild(this.wave),this.wave.active=!1,this.waveInner=h(this.wavePrefab),this.node.parent.addChild(this.waveInner),this.waveInner.active=!1,this.currWaveFrame=l.BOARD_WAVE_FRAMES,this.waveOriginScale.set(this.wave.scale)}setWave(){if(this.type!=l.BOARD_TYPE.GIANT){this.currWaveFrame=0;const i=this.node.position.clone();i.y+=l.WAVE_OFFSET_Y,this.wave.setPosition(i),this.wave.setScale(this.waveOriginScale.clone()),this.wave.active=!0;const t=this.wave.getComponent(p).material.passes[0],e=t.getHandle("color"),s=new c("#dadada");s.a=127,t.setUniform(e,s),this.waveInner.setPosition(i),this.waveInner.setScale(this.waveOriginScale.clone())}}effectWave(){if(this.currWaveFrame<l.BOARD_WAVE_FRAMES){if(this.currWaveFrame>=l.BOARD_WAVE_INNER_START_FRAMES){this.waveInner.active||(this.waveInner.active=!0);const i=this.waveInner.getComponent(p).material.passes[0],t=i.getHandle("color"),e=new c("#dadada");e.a=127-127*Math.sin(.05*this.currWaveFrame),i.setUniform(t,e);const s=this.waveInner.getScale();this.waveInner.setScale(s.x+l.BOARD_WAVE_INNER_STEP,s.y,s.z+l.BOARD_WAVE_INNER_STEP)}const i=this.wave.getComponent(p).material.passes[0],t=i.getHandle("color"),e=new c("#dadada");e.a=127-127*Math.sin(.1*this.currWaveFrame),i.setUniform(t,e);const s=this.waveInner.getScale();this.wave.setScale(s.x+l.BOARD_WAVE_STEP,s.y,s.z+l.BOARD_WAVE_STEP),this.currWaveFrame++}else this.wave.active=!1,this.waveInner.active=!1}getHeight(){return this.type===l.BOARD_TYPE.DROP?l.BOARD_HEIGTH*l.BOARD_HEIGTH_SCALE_DROP:l.BOARD_HEIGTH}getRadius(){return this.type===l.BOARD_TYPE.GIANT?l.BOARD_RADIUS*l.BOARD_RADIUS_SCALE_GIANT:l.BOARD_RADIUS}setMove(i){const t=d.getDiffCoeff(i,1,10);return Math.random()*t>5}effectMove(){if(this.isMoving){var i=this.node.getPosition().clone(),t=i.x;this.isMovingRight&&t<=l.SCENE_MAX_OFFSET_X?(t+=l.BOARD_MOVING_STEP,this.node.setPosition(t,i.y,i.z)):this.isMovingRight&&t>l.SCENE_MAX_OFFSET_X?this.isMovingRight=!1:!this.isMovingRight&&t>=-l.SCENE_MAX_OFFSET_X?(t-=l.BOARD_MOVING_STEP,this.node.setPosition(t,i.y,i.z)):!this.isMovingRight&&t<-l.SCENE_MAX_OFFSET_X&&(this.isMovingRight=!0),this.type===l.BOARD_TYPE.SPRING&&(this.springHelix.setPosition(this.node.position.x,this.springHelix.position.y,this.springHelix.position.z),this.springTop.setPosition(this.node.position.x,this.springTop.position.y,this.springTop.position.z)),this.setCenterPos(),this.hasDiamond&&this.setDiamondPos()}}revive(){this.isActive=!1,this.isMoving=!1,this.type===l.BOARD_TYPE.DROP&&(this.currDropFrame=l.BOARD_DROP_FRAMES,this.node.setPosition(this.posBeforeDrop))}}).prototype,"diamondPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(m.prototype,"centerPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(m.prototype,"wavePrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(m.prototype,"springTopPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=t(m.prototype,"springHelixPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=m))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/camera-ctrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(i){var s,t,o,e,n,r,_,a;return{setters:[function(i){s=i.applyDecoratedDescriptor,t=i.initializerDefineProperty},function(i){o=i.cclegacy,e=i.Vec3,n=i.Node,r=i._decorator,_=i.Component},function(i){a=i.Constants}],execute:function(){var h,P,c,l,p;o._RF.push({},"b5204GgQaBDNqMtOdI4KDJl","camera-ctrl",void 0);const{ccclass:g,property:A}=r,M=new e;i("CameraCtrl",(h=g("CameraCtrl"),P=A(n),h((p=s((l=class extends _{constructor(...i){super(...i),t(this,"planeNode",p,this),this.preType=a.BOARD_TYPE.NORMAL,this._originPos=new e}start(){this._originPos.set(a.CAMERA_INIT_POS),this.setPosition(this._originPos),this.node.eulerAngles=a.CAMERA_INIT_ROT}setOriginPosX(i){this._originPos.x=i}setOriginPosY(i){this._originPos.y=i}update(){if(M.set(this.node.position),M.x!==this._originPos.x||M.y!==this._originPos.y){if(Math.abs(M.x-this._originPos.x)<=a.CAMERA_MOVE_MINI_ERR)M.x=this._originPos.x,this.setPosition(M);else{const i=this._originPos.x-M.x;M.x+=i/a.CAMERA_MOVE_X_FRAMES,this.setPosition(M)}if(M.set(this.node.position),Math.abs(M.y-this._originPos.y)<=a.CAMERA_MOVE_MINI_ERR)M.y=this._originPos.y,this.setPosition(M);else{const i=this._originPos.y-M.y;this.preType===a.BOARD_TYPE.SPRING?(M.y+=i/a.CAMERA_MOVE_Y_FRAMES_SPRING,this.setPosition(M)):(M.y+=i/a.CAMERA_MOVE_Y_FRAMES,this.setPosition(M))}}}reset(){this._originPos.set(a.CAMERA_INIT_POS),this.setPosition(this._originPos)}setPosition(i){this.node.setPosition(i);const s=i.y-27;this.planeNode.setPosition(i.x,s,-100)}}).prototype,"planeNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=l))||c));o._RF.pop()}}}));

System.register("chunks:///_virtual/constants.ts",["cc"],(function(_){var A,R;return{setters:[function(_){A=_.cclegacy,R=_.Vec3}],execute:function(){A._RF.push({},"d9bbf8RNxZP/qHAzCKjmpIn","constants",void 0);var E=function(_){return _[_.NORMAL=0]="NORMAL",_[_.SPRING=1]="SPRING",_[_.DROP=2]="DROP",_[_.GIANT=3]="GIANT",_[_.SPRINT=4]="SPRINT",_}(E||{}),S=function(_){return _[_.READY=1]="READY",_[_.PLAYING=2]="PLAYING",_[_.PAUSE=3]="PAUSE",_[_.OVER=4]="OVER",_}(S||{}),P=function(_){return _.RESTART="restart",_.REVIVE="revive",_.ADDSCORE="add-score",_.DYING="dying",_.HIDETIPS="hide-tips",_}(P||{}),O=function(_){return _[_.JUMPUP=1]="JUMPUP",_[_.FALLDOWN=2]="FALLDOWN",_[_.SPRINT=3]="SPRINT",_}(O||{});class I{}_("Constants",I),I.COEFF_POS_BALL=8/360,I.PLAYER_MAX_DOWN_FRAMES=40,I.MAX_SCORE=0,I.SCORE_BOARD_CENTER=2,I.SCORE_BOARD_NOT_CENTER=1,I.BOARD_INIT_POS=new R(0,10,0),I.BOARD_NUM=6,I.BOARD_NEW_INDEX=2,I.BOARD_HEIGTH=.25,I.BOARD_RADIUS=1.5,I.BOARD_HEIGTH_SCALE_DROP=.5,I.BOARD_RADIUS_SCALE_GIANT=2.8,I.BOARD_GAP=4.3,I.BOARD_GAP_SPRING=9,I.BOARD_GAP_SPRINT=192,I.BOARD_SCALE_GIANT=2.8,I.SCENE_MAX_OFFSET_X=3.5,I.BOARD_TYPE=E,I.BOARD_DROP_FRAMES=40,I.BOARD_DROP_STEP=.5,I.BOARD_RADIUS_CENTER=.35,I.BOARD_SPRING_FRAMES=10,I.BOARD_WAVE_FRAMES=16,I.BOARD_WAVE_INNER_START_FRAMES=8,I.BOARD_WAVE_INNER_STEP=.24,I.BOARD_WAVE_STEP=2.25,I.BOARD_MOVING_STEP=.03,I.SPRING_HEIGHT=.2,I.SPRING_HELIX_STEP=.5,I.SPRING_HELIX_STEP_SPIRNT=1.2,I.SPRING_TOP_STEP=.25,I.SPRING_TOP_STEP_SPRINT=.5,I.WAVE_OFFSET_Y=.065,I.CAMERA_INIT_POS=new R(0,15,22),I.CAMERA_INIT_ROT=new R(-11,0,0),I.CAMERA_MOVE_X_FRAMES=20,I.CAMERA_MOVE_Y_FRAMES=15,I.CAMERA_MOVE_Y_FRAMES_SPRING=23,I.CAMERA_MOVE_MINI_ERR=.02,I.CAMERA_OFFSET_Y=10,I.CAMERA_OFFSET_Y_SPRINT=15,I.BOARD_BUMP_FRAMES=10,I.BOARD_BUMP_STEP=[-.15,-.1,-.07,-.02,-.003,.003,.02,.07,.1,.15],I.GAME_STATE=S,I.GAME_EVENT=P,I.BALL_RADIUS=.5,I.BALL_JUMP_STATE=O,I.BALL_JUMP_FRAMES=20,I.BALL_JUMP_FRAMES_SPRING=27,I.BALL_JUMP_FRAMES_SPRINT=240,I.BALL_JUMP_STEP=[.8,.6,.5,.4,.3,.2,.15,.1,.05,.03],I.BALL_JUMP_STEP_SPRING=[1.2,.8,.6,.4,.3,.2,.15,.1,.05],I.BALL_JUMP_STEP_SPRINT=.8,I.BALL_SPRINT_STEP_Y=10,I.DIAMOND_NUM=10,I.DIAMOND_PIECE_NUM=10,I.DIAMOND_RADIUS=.3,I.DIAMOND_ROTATE_STEP_Y=1.5,I.DIAMOND_SCORE=1,I.DIAMOND_SCORE_AREA=.6,I.DIAMOND_SPRINT_SCORE_AREA=1,I.DIAMOND_SPRINT_STEP_Y=4,I.DIAMOND_START_FRAME=6,I.normalDt=1/60,A._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./ball.ts","./board-manager.ts","./camera-ctrl.ts","./ui-manager.ts","./audio-manager.ts"],(function(e){var t,a,i,r,n,s,o,l,h,u,c,E,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.Prefab,n=e._decorator,s=e.Component,o=e.instantiate},function(e){l=e.Constants},function(e){h=e.Ball},function(e){u=e.BoardManager},function(e){c=e.CameraCtrl},function(e){E=e.UIManager},function(e){g=e.AudioManager}],execute:function(){var d,b,m,M,A,f,p,T,v,_,G,R,S;i._RF.push({},"6b6999+5cFK4K47RCoawnB4","game",void 0);const{ccclass:y,property:D}=n;e("Game",(d=y("Game"),b=D(r),m=D(u),M=D(c),A=D(E),f=D(g),d((v=t((T=class extends s{constructor(...e){super(...e),a(this,"ballPref",v,this),a(this,"boardManager",_,this),a(this,"cameraCtrl",G,this),a(this,"uiManager",R,this),a(this,"audioManager",S,this),this.initFirstBoard=!1,this.state=l.GAME_STATE.READY,this.score=0,this.hasRevive=!1,this._ball=null}get ball(){return this._ball}__preload(){l.game=this}onLoad(){if(console.log("MIEN onLoad GAME"),!this.ballPref)return console.log("There is no ball!!"),void(this.enabled=!1);const e=o(this.ballPref);e.parent=this.node.parent,this._ball=e.getComponent(h)}start(){console.log("MIEN STAR GAME"),this.node.on(l.GAME_EVENT.RESTART,this.gameStart,this),this.node.on(l.GAME_EVENT.REVIVE,this.gameRevive,this)}onDestroy(){this.node.off(l.GAME_EVENT.RESTART,this.gameStart,this),this.node.off(l.GAME_EVENT.REVIVE,this.gameRevive,this)}resetGame(){this.state=l.GAME_STATE.READY,this._ball.reset(),this.cameraCtrl.reset(),this.boardManager.reset(),this.uiManager.showDialog(!0)}gameStart(){this.audioManager.playSound(),this.uiManager.showDialog(!1),this.state=l.GAME_STATE.PLAYING,this.hasRevive=!1,this.score=0}gameDie(){this.audioManager.playSound(!1),this.state=l.GAME_STATE.PAUSE,this.hasRevive?this.gameOver():this.node.emit(l.GAME_EVENT.DYING,(()=>{this.gameOver()}))}gameOver(){this.state=l.GAME_STATE.OVER,this.audioManager.playSound(!1),this.resetGame()}gameRevive(){this.hasRevive=!0,this.state=l.GAME_STATE.READY,this.ball.revive(),this.scheduleOnce((()=>{this.audioManager.playSound(),this.state=l.GAME_STATE.PLAYING}),1)}addScore(e){this.score+=e,this.node.emit(l.GAME_EVENT.ADDSCORE,this.score)}}).prototype,"ballPref",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(T.prototype,"boardManager",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(T.prototype,"cameraCtrl",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(T.prototype,"uiManager",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(T.prototype,"audioManager",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=T))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/hotupdate.ts",["cc"],(function(e){var a,t;return{setters:[function(e){a=e.cclegacy,t=e.native}],execute:function(){a._RF.push({},"6e9b1dKtN5H3oz/ZYxWGJWw","hotupdate",void 0);e("HotUpdateManager",class{constructor(e,a,s){this._am=null,this._storagePath=a,this._callback=s,this._am=new t.AssetsManager("",this._storagePath),this._am.loadLocalManifest(e)||console.warn("Failed to load local manifest!"),this._am.setEventCallback(this._onEvent.bind(this)),this._am.getLocalManifest()}checkUpdate(){var e;null==(e=this._am)||e.checkUpdate()}update(){var e;null==(e=this._am)||e.update()}_onEvent(e){var a;switch(e.getEventCode()){case t.EventAssetsManager.UPDATE_PROGRESSION:this._callback(e.getPercent());break;case t.EventAssetsManager.ALREADY_UP_TO_DATE:case t.EventAssetsManager.UPDATE_FINISHED:console.log("Update finished!"),this._callback(1,!0);break;case t.EventAssetsManager.UPDATE_FAILED:console.warn("Update failed, retrying..."),null==(a=this._am)||a.downloadFailedAssets();break;case t.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case t.EventAssetsManager.ERROR_PARSE_MANIFEST:console.error("Manifest error!"),this._callback(1,!0)}}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./migrate-canvas.ts","./constants.ts","./audio-manager.ts","./ball.ts","./board-manager.ts","./board.ts","./camera-ctrl.ts","./game.ts","./page-result.ts","./page-start.ts","./revive.ts","./ui-manager.ts","./update-value-label.ts","./hotupdate.ts","./splash.ts","./pool-manager.ts","./utils.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){var e,n,t,i,o,r,c;return{setters:[function(a){e=a.cclegacy,n=a.director,t=a.Director,i=a.Canvas,o=a.Camera,r=a.game,c=a.Node}],execute:function(){e._RF.push({},"e67d1aut9lGg7plx+wzVkcS","migrate-canvas",void 0);const a=1048575;function l(e,n){for(let t=0,i=e.children.length;t<i;t++)e.children[t].layer=n,l(e.children[t],n)}n.on(t.EVENT_AFTER_SCENE_LAUNCH,(()=>{var e,t,c;const s=null==(e=n.getScene())?void 0:e.children;let m=null==(t=n.getScene())?void 0:t.getComponentsInChildren(i);if(m.length<=1)return;m=m.filter((e=>!!e.cameraComponent));const p=null==(c=n.getScene())?void 0:c.getComponentsInChildren(o);let C=0;p.forEach((e=>C|=e.visibility&a));const h=[];for(let e=0,n=s.length;e<n;e++){const n=s[e];if(!r.isPersistRootNode(n))continue;const t=n.getComponentsInChildren(i);0!==t.length&&h.push(...t.filter((e=>!!e.cameraComponent)))}h.forEach((e=>{if(m.find((n=>n!==e&&n.cameraComponent.visibility&e.cameraComponent.visibility&a))){const n=~C,t=n&~(n-1);e.cameraComponent.visibility=t|4293918720&e.cameraComponent.visibility,l(e.node,t),C|=n}}))}));const s=c.prototype.setParent;function m(e){let n=0;const t=e.getComponent(i);return t&&t.cameraComponent?(n=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1),n):(e.parent&&(n=m(e.parent)),n)}c.prototype.setParent=function(e,n){if(s.call(this,e,n),!e)return;const t=m(this);t&&(this.layer=t,l(this,t))},e._RF.pop()}}}));

System.register("chunks:///_virtual/page-result.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./update-value-label.ts","./revive.ts"],(function(e){var t,s,i,r,o,n,a,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.Node,o=e._decorator,n=e.Component},function(e){a=e.Constants},function(e){l=e.UpdateValueLabel},function(e){u=e.Revive}],execute:function(){var h,c,p,g,d,b,E,T,f,m,y;i._RF.push({},"31b007MqixM3YyJROFsTMEh","page-result",void 0);const{ccclass:P,property:D}=o;e("PageResult",(h=P("PageResult"),c=D({type:l}),p=D(r),g=D(r),d=D(r),h((T=t((E=class extends n{constructor(...e){super(...e),s(this,"scoreLabel",T,this),this.targetProgress=0,s(this,"nodeTips1",f,this),s(this,"nodeTips2",m,this),s(this,"result",y,this)}init(){this.targetProgress=0,this.scoreLabel.playUpdateValue(this.targetProgress,this.targetProgress,0),this.scoreLabel.isPlaying=!1}onEnable(){a.game.node.on(a.GAME_EVENT.HIDETIPS,this.hideTips,this),a.game.node.on(a.GAME_EVENT.ADDSCORE,this.addScore,this),a.game.node.on(a.GAME_EVENT.DYING,this.gameDie,this),this.showTips(!0),this.showResult(!1),this.init()}start(){this.result.getComponent(u).pageResult=this}onDisable(){a.game.node.off(a.GAME_EVENT.HIDETIPS,this.hideTips,this),a.game.node.off(a.GAME_EVENT.ADDSCORE,this.addScore,this)}addScore(e){this.targetProgress=e;let t=Number(this.scoreLabel.string);this.scoreLabel.playUpdateValue(t,this.targetProgress,(this.targetProgress-t)/20)}gameDie(){this.showTips(!1),this.showResult(!0)}showTips(e){this.nodeTips1.active=e,this.nodeTips2.active=e}hideTips(){this.showTips(!1)}showResult(e){this.result.active=e}}).prototype,"scoreLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(E.prototype,"nodeTips1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(E.prototype,"nodeTips2",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(E.prototype,"result",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=E))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/page-start.ts",["cc","./constants.ts"],(function(t){var a,e,n,s;return{setters:[function(t){a=t.cclegacy,e=t.Component,n=t._decorator},function(t){s=t.Constants}],execute:function(){var c;a._RF.push({},"75579oVThhNcJN3jNLu42YC","page-start",void 0);const{ccclass:r,property:o}=n;t("PageStart",r("PageStart")(c=class extends e{gameStart(){s.game.node.emit(s.GAME_EVENT.RESTART),s.game.audioManager.playClip()}})||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/pool-manager.ts",["cc"],(function(t){var e,o,i,s;return{setters:[function(t){e=t.cclegacy,o=t.instantiate,i=t.NodePool,s=t._decorator}],execute:function(){var c;e._RF.push({},"f92c3xOcsdMEKh7W/84QPrD","pool-manager",void 0);const{ccclass:n,property:a}=s;t("PoolManager",n("PoolManager")(c=class t{constructor(){this.dictPool={},this.dictPrefab={}}static get instance(){return this._instance||(this._instance=new t),this._instance}getNode(t,e){let s=t.data.name;this.dictPrefab[s]=t;let c=null;if(this.dictPool.hasOwnProperty(s)){let e=this.dictPool[s];c=e.size()>0?e.get():o(t)}else{let e=new i;this.dictPool[s]=e,c=o(t)}return c.parent=e,c}putNode(t){let e=t.name,o=null;this.dictPool.hasOwnProperty(e)?o=this.dictPool[e]:(o=new i,this.dictPool[e]=o),o.put(t)}clearPool(t){if(this.dictPool.hasOwnProperty(t)){this.dictPool[t].clear()}}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/revive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(e){var t,i,n,o,r,s,l,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.WidgetComponent,r=e.Label,s=e.SpriteComponent,l=e._decorator,u=e.Component},function(e){a=e.Constants}],execute:function(){var c,p,h,g,b,w,m,C,f,y,D,v,R;n._RF.push({},"37e87RwLXtA5LwGn6Zuq48u","revive",void 0);const{ccclass:L,property:d}=l;e("Revive",(c=L("Revive"),p=d(o),h=d(r),g=d({type:r}),b=d({type:r}),w=d(s),c((f=t((C=class extends u{constructor(...e){super(...e),this.closeCb=null,i(this,"wgMenu",f,this),i(this,"historyLabel",y,this),i(this,"scoreLabel",D,this),i(this,"progressLabel",v,this),i(this,"spCountDown",R,this),this.pageResult=null}onEnable(){this.show()}show(){const e=a.game.score;this.scoreLabel.string=e.toString(),a.MAX_SCORE<e&&(a.MAX_SCORE=e),this.historyLabel.string=a.MAX_SCORE.toString(),this.countDownTime=5,this.progressLabel.string=this.countDownTime+"",this.currentTime=0,this.spCountDown.fillRange=1,this.isCountDowning=!0}onBtnReviveClick(){this.isCountDowning=!1,a.game.audioManager.playClip(),a.game.node.emit(a.GAME_EVENT.REVIVE),this.pageResult.showResult(!1)}onBtnSkipClick(){a.game.audioManager.playClip(),this.isCountDowning=!1,a.game.gameOver()}update(e){if(!this.isCountDowning)return;this.currentTime+=e;let t=this.countDownTime-this.currentTime;this.progressLabel.string=Math.ceil(t)+"",t<=0&&(t=0,this.isCountDowning=!1,this.onBtnSkipClick());let i=t/this.countDownTime;this.spCountDown.fillRange=i}}).prototype,"wgMenu",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(C.prototype,"historyLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(C.prototype,"scoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(C.prototype,"progressLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(C.prototype,"spCountDown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=C))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/splash.ts",["./rollupPluginModLoBabelHelpers.js","cc","./hotupdate.ts"],(function(r){var e,t,s,a,o,i,n,l,p,c;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.initializerDefineProperty},function(r){s=r.cclegacy,a=r.Label,o=r.ProgressBar,i=r._decorator,n=r.Component,l=r.native,p=r.director},function(r){c=r.HotUpdateManager}],execute:function(){var g,u,h,d,b,f,m;s._RF.push({},"9b584U7PzpI0b7m/bwaJKrT","splash",void 0);const{ccclass:B,property:P}=i;r("Splash",(g=B("Splash"),u=P(a),h=P(o),g((f=e((b=class extends n{constructor(...r){super(...r),t(this,"loadingLabel",f,this),t(this,"progressBar",m,this),this._targetProgress=0}start(){const r=l.fileUtils.getWritablePath()+"remote-asset";new c("project.manifest",r,((r,e)=>{this._targetProgress=r,e&&p.loadScene("main")})).checkUpdate()}update(r){var e;(this.progressBar&&(this.progressBar.progress+=.1*(this._targetProgress-this.progressBar.progress)),this.loadingLabel)&&(this.loadingLabel.string=`Loading... ${Math.floor(100*((null==(e=this.progressBar)?void 0:e.progress)??0))}%`)}}).prototype,"loadingLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(b.prototype,"progressBar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/ui-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(e){var t,a,r,n,i,o,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Node,i=e._decorator,o=e.Component},function(e){s=e.Constants}],execute:function(){var c,u,l,p,g,f,h;r._RF.push({},"4becfUEfe1C2prK7h8zxNvz","ui-manager",void 0);const{ccclass:b,property:v}=i;e("UIManager",(c=b("UIManager"),u=v(n),l=v(n),c((f=t((g=class extends o{constructor(...e){super(...e),a(this,"pageStart",f,this),a(this,"pageResult",h,this)}onLoad(){console.log("MIEN UIManager GAME"),s.game.uiManager=this}start(){this.pageResult.active=!1}showDialog(e,...t){this.pageResult.active=!e,this.pageStart.active=e}}).prototype,"pageStart",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(g.prototype,"pageResult",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/update-value-label.ts",["cc"],(function(t){var i,s,a;return{setters:[function(t){i=t.cclegacy,s=t.Label,a=t._decorator}],execute:function(){var e;i._RF.push({},"02566VN0PhN8o7NqZg0WyFs","update-value-label",void 0);const{ccclass:r,property:h}=a;t("UpdateValueLabel",r("UpdateValueLabel")(e=class extends s{constructor(...t){super(...t),this.isPlaying=!1,this.startVal=0,this.endVal=0,this.diffVal=0,this.currTime=0,this.changingTime=0}start(){}playUpdateValue(t,i,s){this.startVal=t,this.endVal=i,this.diffVal=this.endVal-this.startVal,this.currTime=0,this.changingTime=s,this.string=t.toString(),this.isPlaying=!0}update(t){if(this.isPlaying){if(this.currTime<this.changingTime){this.currTime+=t;var i=this.startVal+parseInt((this.currTime/this.changingTime*this.diffVal).toString());return i<this.startVal?i=this.startVal:i>this.endVal&&(i=this.endVal),void(this.string=`${i}`)}this.string=`${this.endVal}`,this.isPlaying=!1}}})||e);i._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"dddce/2a/tOSLUiRKNMAQVd","utils",void 0);t("utils",{getDiffCoeff:function(t,n,e){return(e*t+1)/(1*t+((e+1)/n-1))},getRandomInt:function(t,n){var e=Math.random()*(n-t+1)+t;return Math.floor(e)}});n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});