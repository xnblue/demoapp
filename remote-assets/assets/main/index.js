System.register("chunks:///_virtual/HotUpdate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UpdatePanel.ts"],(function(e){var t,a,s,i,n,o,r,c,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){s=e.cclegacy,i=e.Asset,n=e.Node,o=e._decorator,r=e.Component,c=e.director,l=e.game},function(e){d=e.UpdatePanel}],execute:function(){var f,h,p,g,m,b,u,_,v;s._RF.push({},"8ee7ate7OVDEph2ruFCYLQZ","HotUpdate",void 0);const E=window.jsb;var A=JSON.stringify({packageUrl:"http://192.168.55.13:5502/remote-assets/",remoteManifestUrl:"http://192.168.55.13:5502/remote-assets/project.manifest",remoteVersionUrl:"http://192.168.55.13:5502/remote-assets/version.manifest",version:"1.0.0",assets:{"src/application.js":{size:5514,md5:"d09753aaed7c55c4566cecf766cbc5c3"},"src/cocos-js/ammo-instantiated-45eaa448.js":{size:2318381,md5:"081a863c98742000893bca3bb87c1775"},"src/cocos-js/cc.js":{size:1774495,md5:"c4ba032d442580df30778c0369917917"},"src/cocos-js/wait-for-ammo-instantiation.js":{size:625,md5:"c9c1bf74589762eca08ae868d216f243"},"src/import-map.json":{size:111,md5:"498f3926fc713deab3e0ac6fcbb3d549"},"src/settings.json":{size:31619,md5:"f54273c3c1c29dc9040f129ee11db461"},"src/system.bundle.js":{size:6275,md5:"3f3f2b5f3725599ff2c8b9801195ee37"},"assets/main/config.json":{size:918,md5:"757c93f3908a069aaaa062541715edcf"},"assets/main/import/08/0897a7610.json":{size:248,md5:"12b2792f517c08d878378119a80a09cc"},"assets/main/import/0f/0f4f09600.json":{size:8090,md5:"755c01fe8bae77adb19e3b21f11e95d7"},"assets/main/import/70/700faa17-11a6-46cd-aeb5-d6900bc264f8.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/9e/9e71ecbc-8d63-45dd-b0e3-26cefa3d07b1.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/ae/ae4e2188-2b7b-42a9-85e1-8fb987600b04.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/c1/c1e757ac-f5bb-46ed-b86a-fdabff7aeb55.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/ed/edd97988-52a3-4312-8671-90a51bb563ae.json":{size:69,md5:"1f9cadcf049e884e057ca8cf797d73a1"},"assets/main/import/fd/fd8ec536-a354-4a17-9c74-4f3883c378c8.json":{size:480,md5:"731f44a39ce9377ee6de8ba34edaf039"},"assets/main/index.js":{size:12682,md5:"e2fd04611b129a14138444b6207c1ab7"},"assets/main/native/70/700faa17-11a6-46cd-aeb5-d6900bc264f8.png":{size:3765,md5:"878e89a0a3e02b13beee9f3274f2ca39"},"assets/main/native/80/800f94fd-7424-4202-9629-d3ca77f3b72d.manifest":{size:2808,md5:"507a24062f30709e41e0891ae6a53c7f"},"assets/main/native/9e/9e71ecbc-8d63-45dd-b0e3-26cefa3d07b1.png":{size:2548,md5:"ae7a04af25e238a5478170759b55a7ba"},"assets/main/native/ae/ae4e2188-2b7b-42a9-85e1-8fb987600b04.png":{size:634171,md5:"07b03f7145b75579708ae05ea2a2c029"},"assets/main/native/c1/c1e757ac-f5bb-46ed-b86a-fdabff7aeb55.png":{size:18969,md5:"8eaaf03d4497b39525214bf039a11a7d"},"assets/main/native/ed/edd97988-52a3-4312-8671-90a51bb563ae.png":{size:1829,md5:"94d761c4626df88053787f17fa09914d"},"jsb-adapter/jsb-builtin.js":{size:170485,md5:"f7f79bebbd40822e195af8f099332b0e"},"jsb-adapter/jsb-engine.js":{size:140954,md5:"2846deccc21c73b49e8bae51e3d5387a"}},searchPaths:[]});const{ccclass:M,property:U}=o;e("HotUpdate",(f=M("HotUpdate"),h=U(d),p=U(i),g=U(n),f((u=t((b=class extends r{constructor(...e){super(...e),a(this,"panel",u,this),a(this,"manifestUrl",_,this),a(this,"updateUI",v,this),this._updating=!1,this._canRetry=!1,this._storagePath="",this._am=null,this._checkListener=null,this._updateListener=null,this._failCount=0,this.versionCompareHandle=null}checkCb(e){switch(console.log("Code: "+e.getEventCode()),e.getEventCode()){case E.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.panel.info.string="No local manifest file found, hot update skipped.";break;case E.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case E.EventAssetsManager.ERROR_PARSE_MANIFEST:this.panel.info.string="Fail to download manifest file, hot update skipped.";break;case E.EventAssetsManager.ALREADY_UP_TO_DATE:this.panel.info.string="Already up to date with the latest remote version.",console.log("Mien load first screen... checkCb jsb.EventAssetsManager.ALREADY_UP_TO_DATE:"),c.loadScene("MainScene");break;case E.EventAssetsManager.NEW_VERSION_FOUND:this.panel.info.string="New version found, please try to update. ("+Math.ceil(this._am.getTotalBytes()/1024)+"kb)",this.panel.checkBtn.active=!1,this.panel.fileProgress.progress=0,this.panel.byteProgress.progress=0;break;default:return}this._am.setEventCallback(null),this._checkListener=null,this._updating=!1}updateCb(e){var t=!1,a=!1;switch(e.getEventCode()){case E.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.panel.info.string="No local manifest file found, hot update skipped.",a=!0;break;case E.EventAssetsManager.UPDATE_PROGRESSION:this.panel.byteProgress.progress=e.getPercent(),this.panel.fileProgress.progress=e.getPercentByFile(),this.panel.fileLabel.string=e.getDownloadedFiles()+" / "+e.getTotalFiles(),this.panel.byteLabel.string=e.getDownloadedBytes()+" / "+e.getTotalBytes(),console.log(this.panel.fileLabel.string,this.panel.byteLabel.string);var s=e.getMessage();s&&(this.panel.info.string="Updated file: "+s);break;case E.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case E.EventAssetsManager.ERROR_PARSE_MANIFEST:this.panel.info.string="Fail to download manifest file, hot update skipped.",a=!0;break;case E.EventAssetsManager.ALREADY_UP_TO_DATE:this.panel.info.string="Already up to date with the latest remote version.",a=!0;break;case E.EventAssetsManager.UPDATE_FINISHED:this.panel.info.string="Update finished. "+e.getMessage(),t=!0;break;case E.EventAssetsManager.UPDATE_FAILED:this.panel.info.string="Update failed. "+e.getMessage(),this.panel.retryBtn.active=!0,this._updating=!1,this._canRetry=!0;break;case E.EventAssetsManager.ERROR_UPDATING:this.panel.info.string="Asset update error: "+e.getAssetId()+", "+e.getMessage();break;case E.EventAssetsManager.ERROR_DECOMPRESS:this.panel.info.string=e.getMessage()}if(a&&(this._am.setEventCallback(null),this._updateListener=null,this._updating=!1),t){this._am.setEventCallback(null),this._updateListener=null;var i=E.fileUtils.getSearchPaths(),n=this._am.getLocalManifest().getSearchPaths();console.log(JSON.stringify(n)),Array.prototype.unshift.apply(i,n),localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(i)),E.fileUtils.setSearchPaths(i),setTimeout((()=>{l.restart()}),1e3)}}loadCustomManifest(){if(this._am.getState()===E.AssetsManager.State.UNINITED){var e=new E.Manifest(A,this._storagePath);this._am.loadLocalManifest(e,this._storagePath),this.panel.info.string="Using custom manifest"}}retry(){!this._updating&&this._canRetry&&(this.panel.retryBtn.active=!1,this._canRetry=!1,this.panel.info.string="Retry failed Assets...",this._am.downloadFailedAssets())}checkUpdate(){if(console.log("Mien","call from start"),this._updating)this.panel.info.string="Checking or updating ...";else{if(this._am.getState()===E.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;this._am.loadLocalManifest(e)}if(this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()){if(this._am.setEventCallback(this.checkCb.bind(this)),this._am.getLocalManifest()){const e=this._am.getLocalManifest().getPackageUrl(),t=this._am.getLocalManifest().getVersion();console.log("About to download remote manifest from: ",e),console.log("Version: ",t)}console.log("Mien","checkUpdate()"),this._am.checkUpdate(),this._updating=!0}else this.panel.info.string="Failed to load local manifest ..."}}hotUpdate(){if(this._am&&!this._updating){if(this._am.setEventCallback(this.updateCb.bind(this)),this._am.getState()===E.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;this._am.loadLocalManifest(e)}this._failCount=0,this._am.update(),this.panel.updateBtn.active=!1,this._updating=!0}}show(){!1===this.updateUI.active&&(this.updateUI.active=!0)}onLoad(){if(E){this._storagePath=(E.fileUtils?E.fileUtils.getWritablePath():"/")+"blackjack-remote-asset",console.log("Storage path for remote asset : "+this._storagePath),console.log("Mien Storage"),this.versionCompareHandle=function(e,t){console.log("JS Custom Version Compare: version A is "+e+", version B is "+t);for(var a=e.split("."),s=t.split("."),i=0;i<a.length;++i){var n=parseInt(a[i]),o=parseInt(s[i]||"0");if(n!==o)return n-o}return s.length>a.length?-1:0},console.log("Mien Init with empty manifest"),this._am=new E.AssetsManager("",this._storagePath,this.versionCompareHandle);var e=this.panel;this._am.setVerifyCallback((function(t,a){console.log("Mien setVerifyCallback compressed");var s=a.compressed,i=a.md5,n=a.path;a.size;return s?(e.info.string="Verification passed : "+n,!0):(e.info.string="Verification passed : "+n+" ("+i+")",!0)})),this.panel.info.string="Hot update is ready, please check or directly update.",this.panel.fileProgress.progress=0,this.panel.byteProgress.progress=0}}start(){E&&(console.log("Mien start native"),this._am.setEventCallback(this.checkCb.bind(this)),console.log("Start check update â€¦"),this._am.checkUpdate())}onDestroy(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null)}}).prototype,"panel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(b.prototype,"manifestUrl",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"updateUI",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./HotUpdate.ts","./UpdatePanel.ts","./MainScene.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainScene.ts",["cc"],(function(e){var c,n,t;return{setters:[function(e){c=e.cclegacy,n=e.Component,t=e._decorator}],execute:function(){var s;c._RF.push({},"02cb91SiZtDC59mDVfogZoC","MainScene",void 0);const{ccclass:a,property:o}=t;e("MainScene",a("MainScene")(s=class extends n{start(){}update(e){}})||s);c._RF.pop()}}}));

System.register("chunks:///_virtual/UpdatePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,l,o,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Label,l=e.ProgressBar,o=e.Node,a=e._decorator,u=e.Component}],execute:function(){var s,c,b,p,f,h,y,g,d,m,P,z,w,B,L,v,k,U,_,D,F;r._RF.push({},"d896fFhBk9A57gLMvEj3KZ7","UpdatePanel",void 0);const{ccclass:j,property:x}=a;e("UpdatePanel",(s=j("UpdatePanel"),c=x(n),b=x(l),p=x(n),f=x(l),h=x(n),y=x(o),g=x(o),d=x(o),m=x(o),s((w=t((z=class extends u{constructor(...e){super(...e),i(this,"info",w,this),i(this,"fileProgress",B,this),i(this,"fileLabel",L,this),i(this,"byteProgress",v,this),i(this,"byteLabel",k,this),i(this,"close",U,this),i(this,"checkBtn",_,this),i(this,"retryBtn",D,this),i(this,"updateBtn",F,this)}onLoad(){}}).prototype,"info",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"fileProgress",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"fileLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(z.prototype,"byteProgress",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(z.prototype,"byteLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(z.prototype,"close",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(z.prototype,"checkBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"retryBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(z.prototype,"updateBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=z))||P));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});